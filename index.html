<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Portfolio of Simantini Halder, a Computer Science undergraduate specializing in software development, UI/UX design, and AI applications.">
<meta name="keywords" content="Simantini Halder, portfolio, computer science, software development, UI/UX, AI, chatbot">
<title>Simantini Halder - Enhanced Animated Portfolio</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
:root {
  --primary-color: #333;
  --secondary-color: #222;
  --accent-color: #651fff;
  --gradient-start: #7c4dff;
  --gradient-end: #651fff;
  --card-bg: rgba(255,255,255,0.2);
  --card-border: rgba(255,255,255,0.4);
  --navbar-bg: rgba(255,255,255,0.3);
  --navbar-border: rgba(255,255,255,0.4);
  --navbar-scrolled: rgba(255,255,255,0.5);
  --animated-grad: #fbc2eb, #a6c1ee, #fad0c4, #ffd1ff;
  --body-bg: #fefefe;
  --skill-text: #3a1c96;
  --project-title: #3a1c96;
  --bot-msg-bg: rgba(173,216,230,0.3);
  --bot-msg-border: rgba(173,216,230,0.5);
  --user-msg-bg: rgba(255,182,193,0.3);
  --user-msg-border: rgba(255,182,193,0.5);
  --chat-input-bg: rgba(255,255,255,0.4);
  --chat-input-focus: rgba(255,255,255,0.6);
  --chat-header-bg: rgba(255,255,255,0.3);
  --chat-border: rgba(255,255,255,0.4);
  --chat-overlay-bg: rgba(255,255,255,0.2);
  --chat-bubble-shadow: rgba(124,77,255,0.4);
  --btn-shadow: rgba(124,77,255,0.4);
  --btn-hover-shadow: rgba(124,77,255,0.6);
  --h2-after-bg: linear-gradient(90deg, var(--gradient-start), var(--gradient-end));
}
body.dark {
  --primary-color: #ddd;
  --secondary-color: #bbb;
  --accent-color: #a29bfe;
  --gradient-start: #a29bfe;
  --gradient-end: #9980fa;
  --card-bg: rgba(0,0,0,0.2);
  --card-border: rgba(255,255,255,0.1);
  --navbar-bg: rgba(0,0,0,0.3);
  --navbar-border: rgba(255,255,255,0.1);
  --navbar-scrolled: rgba(0,0,0,0.5);
  --animated-grad: #0f0c29, #302b63, #24243e, #302b63;
  --body-bg: #121212;
  --skill-text: #9980fa;
  --project-title: #9980fa;
  --bot-msg-bg: rgba(0, 128, 128, 0.3);
  --bot-msg-border: rgba(0, 128, 128, 0.5);
  --user-msg-bg: rgba(139, 0, 0, 0.3);
  --user-msg-border: rgba(139, 0, 0, 0.5);
  --chat-input-bg: rgba(0,0,0,0.4);
  --chat-input-focus: rgba(0,0,0,0.6);
  --chat-header-bg: rgba(0,0,0,0.3);
  --chat-border: rgba(255,255,255,0.1);
  --chat-overlay-bg: rgba(0,0,0,0.2);
  --chat-bubble-shadow: rgba(162,155,254,0.4);
  --btn-shadow: rgba(162,155,254,0.4);
  --btn-hover-shadow: rgba(162,155,254,0.6);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Poppins', sans-serif; background: var(--body-bg); color: var(--primary-color); overflow-x: hidden; }

/* Background animation */
.animated-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: linear-gradient(45deg, var(--animated-grad));
  background-size: 400% 400%; animation: gradientWave 15s ease infinite; z-index: -3; }
@keyframes gradientWave { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

/* Navbar with glass */
.navbar { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: var(--navbar-bg); backdrop-filter: blur(20px); position: sticky; top: 0; z-index: 1000; border-bottom: 1px solid var(--navbar-border); box-shadow: 0 4px 30px rgba(0,0,0,0.1); transition: background 0.3s ease; }
.navbar.scrolled { background: var(--navbar-scrolled); }
.logo { font-weight: bold; font-size: 1.5rem; letter-spacing: 1px; }
.nav-links { display: flex; gap: 1.5rem; list-style: none; }
.nav-links a { text-decoration: none; color: var(--primary-color); font-weight: 500; position: relative; transition: color 0.3s ease; }
.nav-links a::after { content: ''; position: absolute; bottom: -4px; left: 0; width: 0; height: 2px; background: var(--h2-after-bg); transition: width 0.3s ease; }
.nav-links a:hover { color: var(--accent-color); }
.nav-links a:hover::after { width: 100%; }
.theme-toggle { background: none; border: none; font-size: 1.2rem; cursor: pointer; transition: transform 0.3s ease; }
.theme-toggle:hover { transform: scale(1.1); }

/* Hero */
.hero { min-height: 90vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 2rem; position: relative; overflow: hidden; animation: fadeIn 1.5s ease; }
.hero h1 { font-size: 3.5rem; margin-bottom: 0.5rem; animation: floatText 3s ease-in-out infinite; text-shadow: 0 2px 10px rgba(0,0,0,0.1); }
.hero p { font-size: 1.3rem; max-width: 700px; opacity: 0; animation: fadeInUp 1s ease 0.5s forwards; }
.profile-pic { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; object-position: center; margin-bottom: 1.5rem; border: 5px solid rgba(255,255,255,0.7); box-shadow: 0 5px 20px rgba(0,0,0,0.2); background-color: #fff; position: relative; }
.profile-pic::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background: url('https://via.placeholder.com/150?text=Loading') center/cover no-repeat; opacity: 0.5; }
.profile-pic.loaded::after { display: none; }
.btn { margin-top: 1.5rem; padding: 0.8rem 1.5rem; background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end)); color: white; border-radius: 50px; text-decoration: none; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 5px 15px var(--btn-shadow); position: relative; overflow: hidden; }
.btn::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: rgba(255,255,255,0.2); transform: rotate(45deg); transition: all 0.5s ease; }
.btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px var(--btn-hover-shadow); }
.btn:hover::before { top: 0; left: 0; }

/* Sections with reveal */
section { padding: 5rem 2rem; opacity: 0; transform: translateY(50px); transition: opacity 0.8s ease, transform 0.8s ease; }
section.visible { opacity: 1; transform: translateY(0); }
h2 { text-align: center; font-size: 2.5rem; margin-bottom: 2rem; position: relative; }
h2::after { content: ''; display: block; width: 50px; height: 3px; background: var(--h2-after-bg); margin: 0.5rem auto; }

/* Skills horizontal container */
.skills-container {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  flex-wrap: wrap;
  max-width: 900px;
  margin: 0 auto;
}
.skill-card {
  background: var(--card-bg);
  backdrop-filter: blur(20px);
  padding: 1rem 1.2rem;
  border-radius: 20px;
  border: 1px solid var(--card-border);
  text-align: center;
  width: 110px;
  cursor: default;
}
.skill-card img {
  width: 50px;
  height: 50px;
  object-fit: contain;
  margin-bottom: 0.5rem;
}
.skill-card p {
  font-weight: 600;
  font-size: 1rem;
  color: var(--skill-text);
}

/* Certifications container */
.certifications-container {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  flex-wrap: wrap;
  max-width: 1200px;
  margin: 0 auto;
}
.cert-card {
  background: var(--card-bg);
  backdrop-filter: blur(20px);
  padding: 1rem;
  border-radius: 20px;
  border: 1px solid var(--card-border);
  text-align: center;
  width: 200px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
}
.cert-card:hover {
  transform: translateY(-5px) scale(1.03);
  box-shadow: 0 10px 25px rgba(124,77,255,0.3);
}
.cert-card img {
  width: 50px;
  height: 50px;
  object-fit: contain;
  margin-bottom: 0.5rem;
  transition: transform 0.3s ease;
}
.cert-card:hover img {
  transform: scale(1.05);
}
.cert-card p {
  font-weight: 500;
  font-size: 1rem;
  color: var(--skill-text);
}

/* Projects grid */
.project-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
  gap: 1.5rem;
  max-width: 1000px;
  margin: 0 auto;
}
.project-card {
  background: var(--card-bg);
  backdrop-filter: blur(20px);
  padding: 1rem 1rem 1.3rem 1rem;
  border-radius: 20px;
  border: 1px solid var(--card-border);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  text-align: center;
  cursor: pointer;
  display: flex;
  flex-direction: column;
}
.project-card:hover {
  transform: translateY(-5px) scale(1.03);
  box-shadow: 0 10px 25px rgba(124,77,255,0.3);
}
.project-card img {
  width: 100%;
  height: 140px;
  object-fit: cover;
  border-radius: 15px;
  margin-bottom: 1rem;
  transition: transform 0.3s ease;
}
.project-card:hover img {
  transform: scale(1.05);
}
.project-card h3 {
  font-weight: 600;
  font-size: 1.2rem;
  margin-bottom: 0.5rem;
  color: var(--project-title);
}
.project-card p {
  font-size: 0.9rem;
  font-weight: 300;
  line-height: 1.4;
  color: var(--secondary-color);
}

/* Chat bubble */
.chat-bubble { position: fixed; bottom: 30px; right: 30px; background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end)); color: white; padding: 1rem 1.5rem; border-radius: 50px; box-shadow: 0 5px 15px var(--chat-bubble-shadow); cursor: pointer; display: flex; align-items: center; animation: pulse 2s infinite; transition: transform 0.3s ease; z-index: 1001; }
.chat-bubble:hover { transform: scale(1.05); }
.chat-bubble::before { content: 'ðŸ’¬'; font-size: 1.5rem; margin-right: 0.5rem; }
@keyframes pulse { 0%,100%{box-shadow: 0 0 0 0 rgba(124,77,255,0.7);} 70%{box-shadow: 0 0 0 10px rgba(124,77,255,0);} }

/* Chat Overlay */
.chat-overlay { position: fixed; bottom: -100%; right: 30px; width: min(90vw, 400px); height: 60vh; background: var(--chat-overlay-bg); backdrop-filter: blur(20px); border-radius: 30px 30px 0 0; border: 1px solid var(--card-border); box-shadow: 0 10px 40px rgba(0,0,0,0.2); display: flex; flex-direction: column; overflow: hidden; transition: bottom 0.5s ease; z-index: 1002; }
.chat-overlay.active { bottom: 0; }

/* Chat Header */
.chat-header { background: var(--chat-header-bg); padding: 1.2rem; text-align: center; font-weight: 600; border-bottom: 1px solid var(--chat-border); position: relative; display: flex; align-items: center; justify-content: center; }
.chat-header-pic { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; object-position: center; margin-right: 10px; background-color: #fff; position: relative; }
.chat-header-pic::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; background: url('https://via.placeholder.com/40?text=Loading') center/cover no-repeat; opacity: 0.5; }
.chat-header-pic.loaded::after { display: none; }
.chat-close { position: absolute; right: 20px; top: 50%; transform: translateY(-50%); cursor: pointer; font-size: 1.5rem; transition: color 0.3s ease; }
.chat-close:hover { color: var(--accent-color); }

/* Chat Messages */
.chat-messages { flex: 1; padding: 1.2rem; overflow-y: auto; display: flex; flex-direction: column; gap: 1rem; }
.bot-msg, .user-msg { padding: 1rem 1.2rem; border-radius: 20px; max-width: 85%; animation: bubbleIn 0.4s ease; position: relative; }
.bot-msg { align-self: flex-start; background: var(--bot-msg-bg); border: 1px solid var(--bot-msg-border); backdrop-filter: blur(15px); }
.user-msg { align-self: flex-end; background: var(--user-msg-bg); border: 1px solid var(--user-msg-border); backdrop-filter: blur(15px); }
.bot-msg::before, .user-msg::before { content: ''; position: absolute; width: 10px; height: 10px; background: inherit; border: inherit; transform: rotate(45deg); }
.bot-msg::before { left: -5px; bottom: 10px; }
.user-msg::before { right: -5px; bottom: 10px; }
.bot-msg.loading::after { content: '...'; animation: loading 1s infinite; }
@keyframes loading { 0% { content: '.'; } 33% { content: '..'; } 66% { content: '...'; } }
@keyframes bubbleIn { from{opacity:0; transform:scale(0.8);} to{opacity:1; transform:scale(1);} }

/* Chat Input */
.chat-input { display: flex; padding: 1rem; border-top: 1px solid var(--chat-border); background: var(--chat-header-bg); }
.chat-input input { flex: 1; padding: 0.8rem; border: none; outline: none; background: var(--chat-input-bg); border-radius: 25px; margin-right: 0.5rem; transition: background 0.3s ease; color: var(--primary-color); }
.chat-input input:focus { background: var(--chat-input-focus); }
.chat-input button { background: linear-gradient(90deg, var(--gradient-start), var(--gradient-end)); border: none; padding: 0.8rem 1.2rem; border-radius: 25px; color: white; cursor: pointer; box-shadow: 0 0 10px var(--btn-shadow); transition: transform 0.3s ease; }
.chat-input button:hover { transform: scale(1.05); }

@keyframes fadeIn { from{opacity:0; transform:translateY(10px);} to{opacity:1; transform:translateY(0);} }
@keyframes fadeInUp { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }
@keyframes floatText { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }
</style>
</head>
<body>

<div class="animated-bg"></div>

<nav class="navbar">
  <div class="logo">Simantini Halder</div>
  <ul class="nav-links">
    <li><a href="#about" role="link" aria-label="About section">About</a></li>
    <li><a href="#skills" role="link" aria-label="Skills section">Skills</a></li>
    <li><a href="#certifications" role="link" aria-label="Certifications section">Certifications</a></li>
    <li><a href="#projects" role="link" aria-label="Projects section">Projects</a></li>
    <li><a href="#contact" role="link" aria-label="Contact section">Contact</a></li>
  </ul>
  <button class="theme-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
</nav>

<section class="hero">
  <img src="https://i.ibb.co/2YMjRQj3/1723206971008-2.jpg" alt="Simantini Halder's Profile Picture" class="profile-pic">
  <h1>Hello, I'm Simantini Halder</h1>
  <p>Computer Science undergraduate with expertise in software development, UI/UX design, and AI-powered applications.</p>
  <a href="#projects" class="btn" role="button" aria-label="View projects">View My Work</a>
</section>

<section id="about">
  <h2>About Me</h2>
  <p style="text-align:center;max-width:800px;margin:auto;font-weight:300;line-height:1.6;">
    I am currently pursuing my B.Tech in Computer Science & Technology at the University of Engineering and Management, Kolkata. Passionate about creating innovative solutions, I specialize in software development, UI/UX design, and AI-powered applications. My projects blend creativity with technical expertise, focusing on user-centric designs and cutting-edge technologies.
  </p>
</section>

<section id="skills">
  <h2>Skills</h2>
  <div class="skills-container" aria-label="Skills list">
    <div class="skill-card" aria-label="Python skill">
      <img src="https://img.icons8.com/color/96/python.png" alt="Python icon" loading="lazy"/>
      <p>Python</p>
    </div>
    <div class="skill-card" aria-label="Java skill">
      <img src="https://img.icons8.com/color/96/java-coffee-cup-logo.png" alt="Java icon" loading="lazy"/>
      <p>Java</p>
    </div>
    <div class="skill-card" aria-label="C programming skill">
      <img src="https://img.icons8.com/color/96/c-programming.png" alt="C Programming icon" loading="lazy"/>
      <p>C</p>
    </div>
    <div class="skill-card" aria-label="SQL skill">
      <img src="https://img.icons8.com/color/96/sql.png" alt="SQL icon" loading="lazy"/>
      <p>SQL</p>
    </div>
    <div class="skill-card" aria-label="JavaScript skill">
      <img src="https://img.icons8.com/color/96/javascript.png" alt="JavaScript icon" loading="lazy"/>
      <p>JavaScript</p>
    </div>
    <div class="skill-card" aria-label="TypeScript skill">
      <img src="https://img.icons8.com/color/96/typescript.png" alt="TypeScript icon" loading="lazy"/>
      <p>TypeScript</p>
    </div>
    <div class="skill-card" aria-label="HTML skill">
      <img src="https://img.icons8.com/color/96/html-5.png" alt="HTML icon" loading="lazy"/>
      <p>HTML</p>
    </div>
    <div class="skill-card" aria-label="CSS skill">
      <img src="https://img.icons8.com/color/96/css3.png" alt="CSS icon" loading="lazy"/>
      <p>CSS</p>
    </div>
    <div class="skill-card" aria-label="Tailwind CSS skill">
      <img src="https://img.icons8.com/color/96/tailwind_css.png" alt="Tailwind CSS icon" loading="lazy"/>
      <p>Tailwind CSS</p>
    </div>
  </div>
</section>

<section id="certifications">
  <h2>Certifications</h2>
  <div class="certifications-container" aria-label="Certifications list">
    <div class="cert-card" tabindex="0" aria-label="Machine Learning with Python certification">
      <img src="https://img.icons8.com/color/96/artificial-intelligence.png" alt="Machine Learning icon" loading="lazy"/>
      <p>Machine Learning with Python â€“ LinkedIn Learning</p>
    </div>
    <div class="cert-card" tabindex="0" aria-label="Complete Guide to C Programming certification">
      <img src="https://img.icons8.com/color/96/c-programming.png" alt="C Programming icon" loading="lazy"/>
      <p>Complete Guide to C Programming â€“ LinkedIn Learning</p>
    </div>
    <div class="cert-card" tabindex="0" aria-label="UX Foundations: Interaction Design certification">
      <img src="https://img.icons8.com/color/96/web-design.png" alt="UX Design icon" loading="lazy"/>
      <p>UX Foundations: Interaction Design â€“ LinkedIn Learning</p>
    </div>
    <div class="cert-card" tabindex="0" aria-label="Introduction to IT & AWS Cloud certification">
      <img src="https://img.icons8.com/color/96/amazon-web-services.png" alt="AWS icon" loading="lazy"/>
      <p>Introduction to IT & AWS Cloud â€“ Amazon Web Services</p>
    </div>
    <div class="cert-card" tabindex="0" aria-label="Foundations of User Experience Design certification">
      <img src="https://img.icons8.com/color/96/google.png" alt="Google icon" loading="lazy"/>
      <p>Foundations of User Experience Design â€“ Google</p>
    </div>
  </div>
</section>

<section id="projects">
  <h2>Projects</h2>
  <div class="project-grid" aria-label="Projects list">
    <div class="project-card" tabindex="0" aria-describedby="desc1" role="group" aria-label="AI-Powered Chatbot Interface project">
      <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=400&q=80" alt="AI-Powered Chatbot Interface" loading="lazy" />
      <h3>AI-Powered Chatbot Interface with Gemini API Integration</h3>
      <p id="desc1">Built a responsive chatbot using the Gemini API to generate intelligent replies and parse answers from uploaded PDFs. Designed with TypeScript, Shadcn UI, and Tailwind CSS to ensure a clean, scalable, and modern user experience.</p>
    </div>
    <div class="project-card" tabindex="0" aria-describedby="desc2" role="group" aria-label="SkyVibe AI Weather Companion project">
      <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="SkyVibe AI Weather Companion" loading="lazy" />
      <h3>SkyVibe â€“ AI Weather Companion</h3>
      <p id="desc2">Developed a smart weather app with chat-based interaction, providing real-time temperature, humidity, and wind data via the OpenWeatherMap API. Integrated Gemini API for conversational responses. Created with HTML, CSS, and JavaScript for a lightweight, interactive UI.</p>
    </div>
  </div>
</section>

<section id="contact">
  <h2>Contact</h2>
  <p style="text-align:center; max-width: 700px; margin: 0 auto 2rem auto;">Feel free to reach out for collaborations or just a friendly hello!</p>
  <form style="max-width: 500px; margin: 0 auto; display: flex; flex-direction: column; gap: 1rem;">
    <input type="text" name="name" placeholder="Your Name" required style="padding: 0.75rem; border-radius: 10px; border: 1px solid #ccc; outline:none;" />
    <input type="email" name="email" placeholder="Your Email" required style="padding: 0.75rem; border-radius: 10px; border: 1px solid #ccc; outline:none;" />
    <textarea name="message" placeholder="Your Message" rows="5" required style="padding: 0.75rem; border-radius: 10px; border: 1px solid #ccc; outline:none;"></textarea>
    <button type="submit" style="background: linear-gradient(90deg,var(--gradient-start),var(--gradient-end)); color: white; padding: 0.8rem; border: none; border-radius: 30px; cursor: pointer; font-weight: 600; box-shadow: 0 5px 15px var(--btn-shadow); transition: transform 0.3s ease;">Send Message</button>
  </form>
</section>

<div class="chat-bubble" aria-label="Open chat with Simantini" role="button" tabindex="0">Chat</div>

<div class="chat-overlay" role="dialog" aria-modal="true" aria-labelledby="chatHeading">
  <div class="chat-header">
    <img src="https://i.ibb.co/2YMjRQj3/1723206971008-2.jpg" alt="Simantini Halder" class="chat-header-pic" />
    <span id="chatHeading">Chat with Simantini</span>
    <span class="chat-close" role="button" tabindex="0" aria-label="Close chat overlay">&times;</span>
  </div>
  <div class="chat-messages">
    <div class="bot-msg">Hi I'm Simantini Halder, what do you want to know about me?</div>
  </div>
  <form class="chat-input" aria-label="Chat message input">
    <input type="text" placeholder="Type your message..." aria-label="Message input" autocomplete="off" />
    <button type="submit" aria-label="Send message">Send</button>
  </form>
</div>

<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.1/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCtzfRYAAEJmkg7ACY4wzMwadOlanNry-s",
    authDomain: "simantinihalderportfolio.firebaseapp.com",
    projectId: "simantinihalderportfolio",
    storageBucket: "simantinihalderportfolio.firebasestorage.app",
    messagingSenderId: "292865235412",
    appId: "1:292865235412:web:b7b0ae4d46a80186639e41",
    measurementId: "G-WXNMD9P4TV"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>

<script>
// Section reveal on scroll
const sections = document.querySelectorAll('section');
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if(entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.2 });
sections.forEach(section => observer.observe(section));

// Navbar background on scroll
const navbar = document.querySelector('.navbar');
window.addEventListener('scroll', () => {
  if(window.scrollY > 50) navbar.classList.add('scrolled');
  else navbar.classList.remove('scrolled');
});

// Dark theme toggle
const themeToggle = document.querySelector('.theme-toggle');
themeToggle.addEventListener('click', () => {
  document.body.classList.toggle('dark');
  if (document.body.classList.contains('dark')) {
    themeToggle.textContent = 'â˜€ï¸';
  } else {
    themeToggle.textContent = 'ðŸŒ™';
  }
});

// Chat overlay toggle
const chatBubble = document.querySelector('.chat-bubble');
const chatOverlay = document.querySelector('.chat-overlay');
const chatClose = document.querySelector('.chat-close');
const chatInput = chatOverlay.querySelector('input');
const chatMessages = chatOverlay.querySelector('.chat-messages');

const myDescription = `About me: I am currently pursuing my B.Tech in Computer Science & Technology at the University of Engineering and Management, Kolkata. Passionate about creating innovative solutions, I specialize in software development, UI/UX design, and AI-powered applications. My projects blend creativity with technical expertise, focusing on user-centric designs and cutting-edge technologies.

Skills: Python, Java, C, SQL, JavaScript, TypeScript, HTML, CSS, Tailwind CSS.

Certifications: Machine Learning with Python â€“ LinkedIn Learning, Complete Guide to C Programming â€“ LinkedIn Learning, UX Foundations: Interaction Design â€“ LinkedIn Learning, Introduction to IT & AWS Cloud â€“ Amazon Web Services, Foundations of User Experience Design â€“ Google.

Projects: 
- AI-Powered Chatbot Interface with Gemini API Integration: Built a responsive chatbot using the Gemini API to generate intelligent replies and parse answers from uploaded PDFs. Designed with TypeScript, Shadcn UI, and Tailwind CSS to ensure a clean, scalable, and modern user experience.
- SkyVibe â€“ AI Weather Companion: Developed a smart weather app with chat-based interaction, providing real-time temperature, humidity, and wind data via the OpenWeatherMap API. Integrated Gemini API for conversational responses. Created with HTML, CSS, and JavaScript for a lightweight, interactive UI.`;

const showInitialMessage = () => {
  chatMessages.innerHTML = ''; // Clear previous messages
  const initialMsg = document.createElement('div');
  initialMsg.className = 'bot-msg';
  initialMsg.textContent = "Hi I'm Simantini Halder, what do you want to know about me?";
  chatMessages.appendChild(initialMsg);
  chatMessages.scrollTop = chatMessages.scrollHeight;
};

chatBubble.addEventListener('click', () => {
  chatOverlay.classList.add('active');
  showInitialMessage(); // Show initial message on open
  chatInput.focus();
});
chatClose.addEventListener('click', () => {
  chatOverlay.classList.remove('active');
});
chatBubble.addEventListener('keydown', e => {
  if(e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    chatOverlay.classList.add('active');
    showInitialMessage(); // Show initial message on open
    chatInput.focus();
  }
});
chatClose.addEventListener('keydown', e => {
  if(e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    chatOverlay.classList.remove('active');
  }
});

// Chat message send with Gemini API
chatOverlay.querySelector('form').addEventListener('submit', async e => {
  e.preventDefault();
  const msg = chatInput.value.trim();
  if(!msg) return;

  // User message
  const userMsg = document.createElement('div');
  userMsg.className = 'user-msg';
  userMsg.textContent = msg;
  chatMessages.appendChild(userMsg);
  chatInput.value = '';
  chatMessages.scrollTop = chatMessages.scrollHeight;

  // Bot response with loading animation
  const botMsg = document.createElement('div');
  botMsg.className = 'bot-msg loading';
  botMsg.textContent = 'Thinking';
  chatMessages.appendChild(botMsg);
  chatMessages.scrollTop = chatMessages.scrollHeight;

  try {
    const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyA0VobpM73lECHv6MMgNleJ76zIX86j1TU', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        contents: [{
          parts: [{
            text: `User message: ${msg}. Reply naturally to the user message and if required then answer based on my portfolio details: ${myDescription}. Reply in short sentences as if I, Simantini Halder, am speaking personally. Keep responses friendly, concise, and true to my portfolio.`
          }]
        }]
      })
    });

    if (!response.ok) {
      throw new Error(`Failed to fetch response from Gemini API: ${response.status} ${response.statusText}`);
    }

    const data = await response.json();
    const botResponse = data.candidates[0].content.parts[0].text;

    // Replace loading message with actual response
    botMsg.className = 'bot-msg';
    botMsg.textContent = botResponse;
  } catch (error) {
    console.error('Error:', error);
    botMsg.className = 'bot-msg';
    botMsg.textContent = "Oops, something went wrong. Please try again!";
  }

  chatMessages.scrollTop = chatMessages.scrollHeight;
});

// Enhanced image loading with detailed error logging
const profilePics = document.querySelectorAll('.profile-pic, .chat-header-pic');
profilePics.forEach(img => {
  const sources = [
    'https://i.ibb.co/2YMjRQj3/1723206971008-2.jpg', // Primary URL
    'https://via.placeholder.com/' + (img.classList.contains('profile-pic') ? '150' : '40') + '?text=Simantini' // Fallback
  ];
  let currentSourceIndex = 0;
  let retryCount = 0;
  const maxRetriesPerSource = 2;

  const loadImage = async () => {
    img.src = sources[currentSourceIndex] + '?t=' + new Date().getTime(); // Cache-busting
    try {
      const response = await fetch(img.src, { method: 'HEAD' });
      console.log(`Checking image: ${img.src}, Status: ${response.status} ${response.statusText}`);
    } catch (error) {
      console.warn(`Failed to check image: ${img.src}, Error: ${error.message}`);
    }
  };

  img.onload = () => {
    img.classList.add('loaded');
    console.log(`Profile image loaded successfully: ${img.src}`);
  };

  img.onerror = async () => {
    console.warn(`Failed to load profile image: ${img.src}, attempt ${retryCount + 1} for source ${currentSourceIndex + 1}`);
    try {
      const response = await fetch(img.src, { method: 'HEAD' });
      console.warn(`Image check failed: ${img.src}, Status: ${response.status} ${response.statusText}`);
    } catch (error) {
      console.warn(`Image check error: ${img.src}, Error: ${error.message}`);
    }

    if (retryCount < maxRetriesPerSource) {
      retryCount++;
      setTimeout(loadImage, 1000 * retryCount); // Retry current source
    } else if (currentSourceIndex < sources.length - 1) {
      currentSourceIndex++;
      retryCount = 0;
      loadImage(); // Try next source
    } else {
      img.src = sources[sources.length - 1];
      img.alt = 'Fallback Profile Image';
      img.classList.add('loaded');
      console.warn(`All sources failed for ${img.className}, using fallback image: ${img.src}`);
    }
  };

  loadImage(); // Initial load
});
</script>

</body>
</html>